<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
////////////////////////////////////////////////////////////////////////////////////////////////////////
require_once(APPPATH.'core/EXT_Controller'.EXT);
////////////////////////////////////////////////////////////////////////////////////////////////////////
class Mycalendar extends EXT_Controller {
////////////////////////////////////////////////////////////////////////////////////////////////////////
function __construct( ) {
	parent::__construct();
}
////////////////////////////////////////////////////////////////////////////////////////////////////////
public function index() {
	
	$this->add_page_data(array(
		'date_current' => date('F Y'),
		'date_next' => date('F Y', strtotime('+1 month')),
		'cal_current' => $this->get_calendar_current(),
		'cal_next' => $this->get_calendar_next()
	));
	

	$this->render_subpage('pages/calendar');
}
////////////////////////////////////////////////////////////////////////////////////////////////////////
// Helper Functions
////////////////////////////////////////////////////////////////////////////////////////////////////////
private function get_calendar_current() {
	$this->load->model('Calendar');
	$query = $this->Calendar->get_month_items(date('m'), date('Y'));

	if ( $query->success )
		return $query->data;
}
private function get_calendar_next() {
	$this->load->model('Calendar');
	$query = $this->Calendar->get_month_items(date('m', strtotime('+1 month')), date('Y', strtotime('+1 month')));

	if ( $query->success )
		return $query->data;
}
////////////////////////////////////////////////////////////////////////////////////////////////////////
} // END OF CLASS
